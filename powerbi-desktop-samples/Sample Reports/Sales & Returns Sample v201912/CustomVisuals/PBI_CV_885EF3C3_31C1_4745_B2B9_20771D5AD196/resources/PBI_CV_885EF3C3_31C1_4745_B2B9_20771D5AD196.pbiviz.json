{"visual":{"name":"pbiImage","displayName":"Image","guid":"PBI_CV_885EF3C3_31C1_4745_B2B9_20771D5AD196","visualClassName":"ImageVisual","version":"1.1.0","description":"A data-bound image control.","supportUrl":"https://www.cloudscope.io/support/custom-visualizations/data-image","gitHubUrl":"https://github.com/chriswill/PowerBIDataImage"},"apiVersion":"2.1.0","author":{"name":"CloudScope, LLC","email":"info@cloudscope.io"},"assets":{"icon":"assets/icon.png"},"externalJS":["node_modules/powerbi-visuals-utils-dataviewutils/lib/index.js"],"style":"style/visual.less","capabilities":{"dataRoles":[{"displayName":"Image url","displayNameKey":"settingsImageUrl","name":"category","kind":"GroupingOrMeasure"}],"objects":{"imageOptions":{"displayName":"Image options","displayNameKey":"settingsImageOptions","properties":{"circle":{"displayName":"Circle","displayNameKey":"settingsCircle","type":{"bool":true}},"borderColor":{"displayName":"Border color","displayNameKey":"settingsBorderColor","type":{"fill":{"solid":{"color":true}}}},"borderWidth":{"displayName":"Border width","displayNameKey":"settingsBorderWidth","type":{"integer":true}}}}},"dataViewMappings":[{"conditions":[{"category":{"max":1}}],"categorical":{"categories":{"for":{"in":"category"},"dataReductionAlgorithm":{"top":{}}}}}]},"stringResources":{"en-US":{"settingsImageUrl":"Image url","settingsImageOptions":"Image options","settingsCircle":"Circle","settingsBorderColor":"Border color","settingsBorderWidth":"Border width"}},"content":{"js":"var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,r){void 0===e&&(e=[]);var n=e;return i(n),t&&(n.identityFields=t),r&&(n.source=r),n}function i(e,t){e.grouped=t?function(){return t}:function(){return r(e)}}function r(e){for(var t,i=[],r=0,n=e.length;n>r;r++){var a=e[r];if(!t||t.identity!==a.identity){if(t={values:[]},a.identity){t.identity=a.identity;var o=a.source;void 0!==o.groupName?t.name=o.groupName:o.displayName&&(t.name=o.displayName)}i.push(t)}t.values.push(a)}return i}e.createValueColumns=t,e.setGrouped=i,e.groupValues=r}(t=e.DataViewTransform||(e.DataViewTransform={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t){if(!e||!e.length)return-1;var i=e[0];if(i.values&&i.values.length>0)for(var n=0,a=i.values.length;a>n;++n){var o=i.values[n];if(o&&o.source&&r(o.source,t))return n}return-1}function i(e,t){if(e&&e.length)for(var i=0,n=e.length;n>i;i++)if(r(e[i].source,t))return i;return-1}function r(e,t){var i=e.roles;return i&&i[t]}function n(e,t){return null!=e&&null!=e.metadata&&e.metadata.columns&&e.metadata.columns.some(function(e){return e.roles&&void 0!==e.roles[t]})}function a(e,t){return e&&e.source&&e.source.roles&&e.source.roles[t]===!0}e.getMeasureIndexOfRole=t,e.getCategoryIndexOfRole=i,e.hasRole=r,e.hasRoleInDataView=n,e.hasRoleInValueColumn=a}(t=e.DataRoleHelper||(e.DataRoleHelper={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,i){if(!e)return i;var r=e[t];return void 0===r?i:r}function i(e,i,r){var n=t(e,i);return n&&n.solid?n.solid.color:r}e.getValue=t,e.getFillColorByPropertyName=i}(t=e.DataViewObject||(e.DataViewObject={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){function i(t,i,r){return t?e.DataViewObject.getValue(t[i.objectName],i.propertyName,r):r}function r(e,t,i){return e&&e[t]?e[t]:i}function n(e,t,r){var n=i(e,t);return n&&n.solid?n.solid.color:r}function a(e,t,r){var n=i(e,t,r);return n&&n.solid?n.solid.color:void 0===n||null===n||\"object\"==typeof n&&!n.solid?r:n}t.getValue=i,t.getObject=r,t.getFillColor=n,t.getCommonValue=a}(t=e.DataViewObjects||(e.DataViewObjects={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i,r=e.extensibility.utils.dataview.DataRoleHelper;!function(e){function t(e,t,i){if(e.categories&&e.categories.length>0){var n=e.categories[0];return n.source&&r.hasRole(n.source,t)&&r.hasRole(n.source,i)}return!1}function i(e){return void 0!==e.groupName?e.groupName:e.queryName}function n(e){var t=o(e);return null!=t&&t.imageUrl===!0}function a(e){var t=o(e);return null!=t&&t.webUrl===!0}function o(e){return e&&e.type&&e.type.misc}function s(e){return e&&e.metadata&&e.metadata.columns&&e.metadata.columns.length?e.metadata.columns.some(function(e){return n(e)===!0}):!1}e.categoryIsAlsoSeriesRole=t,e.getSeriesName=i,e.isImageUrlColumn=n,e.isWebUrlColumn=a,e.getMiscellaneousTypeDescriptor=o,e.hasImageUrlColumn=s}(i=t.converterHelper||(t.converterHelper={}))}(i=t.dataview||(t.dataview={}))}(i=t.utils||(t.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e){return/^https?:\\/\\/.+\\.(gif|jpg|png|svg)$/i.test(e)||/^data:image\\/(gif|jpeg|png|svg\\+xml);base64,/i.test(e)}function i(e,t){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===this.HEADERS_RECEIVED){var e=i.getResponseHeader(\"Content-Type\"),r=[\"image/png\",\"image/jpeg\",\"image/gif\",\"image/svg+xml\"];return r.indexOf(e)>-1?t(!0,e):t(!1,e)}},i.open(\"HEAD\",e,!0),i.send()}e.isImageUrlAllowed=t,e.isFileImage=i}(t=e.validationHelper||(e.validationHelper={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(){}return t.getDefault=function(){return new this},t.createPropertyIdentifier=function(e,t){return{objectName:e,propertyName:t}},t.parse=function(t){var i,r=this.getDefault();if(!t||!t.metadata||!t.metadata.objects)return r;i=r.getProperties();for(var n in i)for(var a in i[n]){var o=r[n][a];r[n][a]=e.DataViewObjects.getCommonValue(t.metadata.objects,i[n][a],o)}return r},t.isPropertyEnumerable=function(e){return!t.InnumerablePropertyPrefix.test(e)},t.enumerateObjectInstances=function(e,t){var i=e&&e[t.objectName];if(!i)return[];var r={objectName:t.objectName,selector:null,properties:{}};for(var n in i)i.hasOwnProperty(n)&&(r.properties[n]=i[n]);return{instances:[r]}},t.prototype.getProperties=function(){var e=this,i={},r=Object.keys(this);return r.forEach(function(r){if(t.isPropertyEnumerable(r)){var n=Object.keys(e[r]);i[r]={},n.forEach(function(e){t.isPropertyEnumerable(r)&&(i[r][e]=t.createPropertyIdentifier(r,e))})}}),i},t}();t.InnumerablePropertyPrefix=/^_/,e.DataViewObjectsParser=t}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),powerbi;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){\"use strict\";var i=e.extensibility.utils.dataview.DataViewObjectsParser,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.imageOptions=new n,t}return __extends(t,e),t}(i);t.VisualSettings=r;var n=function(){function e(){this.circle=!1,this.borderColor=\"#fff\",this.borderWidth=5}return e}();t.imageSettings=n}(i=t.PBI_CV_885EF3C3_31C1_4745_B2B9_20771D5AD196||(t.PBI_CV_885EF3C3_31C1_4745_B2B9_20771D5AD196={}))}(i=t.visual||(t.visual={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){\"use strict\";var t=function(){function t(e){this.target=e.element}return t.prototype.update=function(e){for(this.settings=t.parseSettings(e&&e.dataViews&&e.dataViews[0]);this.target.firstChild;)this.target.removeChild(this.target.firstChild);var i;if(void 0!=e.dataViews[0].categorical.categories?i=e.dataViews[0].categorical.categories[0].values[0]:void 0!=e.dataViews[0].categorical.values&&(i=e.dataViews[0].categorical.values[0].values[0]),null!=i){var r=document.createElement(\"div\");r.classList.add(\"image-container\");var n=i.toString(),a=document.createElement(\"img\");if(a.setAttribute(\"alt\",\"\"),a.setAttribute(\"src\",n),document.body.appendChild(a),this.settings.imageOptions.circle&&a.classList.add(\"circle\"),this.settings.imageOptions.borderWidth>0){var o=(e.viewport.width-2*this.settings.imageOptions.borderWidth).toFixed(0);a.setAttribute(\"style\",\"width: \"+o+\"px; border-style: solid; border-width: \"+this.settings.imageOptions.borderWidth+\"px; border-color: \"+this.settings.imageOptions.borderColor)}else a.setAttribute(\"style\",\"width: \"+e.viewport.width.toFixed(0)+\"px;\");r.appendChild(a),this.target.appendChild(r)}else console.log(\"Image was null\")},t.parseSettings=function(t){return e.VisualSettings.parse(t)},t.prototype.enumerateObjectInstances=function(e){var t=e.objectName,i=[];switch(t){case\"imageOptions\":i.push({objectName:t,properties:{borderColor:this.settings.imageOptions.borderColor,borderWidth:this.settings.imageOptions.borderWidth,circle:this.settings.imageOptions.circle},validValues:{borderWidth:{numberRange:{min:0,max:20}}},selector:null})}return i},t}();e.ImageVisual=t}(t=e.PBI_CV_885EF3C3_31C1_4745_B2B9_20771D5AD196||(e.PBI_CV_885EF3C3_31C1_4745_B2B9_20771D5AD196={}))}(t=e.visual||(e.visual={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.PBI_CV_885EF3C3_31C1_4745_B2B9_20771D5AD196={name:\"PBI_CV_885EF3C3_31C1_4745_B2B9_20771D5AD196\",displayName:\"Image\",\"class\":\"ImageVisual\",version:\"1.1.0\",apiVersion:\"2.1.0\",create:function(t){return new e.extensibility.visual.PBI_CV_885EF3C3_31C1_4745_B2B9_20771D5AD196.ImageVisual(t)},custom:!0}}(i=t.plugins||(t.plugins={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));","css":".visual-PBI_CV_885EF3C3_31C1_4745_B2B9_20771D5AD196 .image-container{width:100%}.visual-PBI_CV_885EF3C3_31C1_4745_B2B9_20771D5AD196 img{display:block;margin-left:auto;margin-right:auto}.visual-PBI_CV_885EF3C3_31C1_4745_B2B9_20771D5AD196 .circle{border-radius:50%}","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAAARnQU1BAACxjwv8YQUAAAABc1JHQgCuzhzpAAACglBMVEUAAADd6/ivz/Wavern8fqy0va21PXn8/vn8vrl8fne7PnM5vfg7Pm61vXZ6fjE3fLc6/m21Pjv9/zA1/Do8/vm8fvi7fmz0/bj7/nh7vrj8Prm8vra6Pi+1/W31PW71va92PbB2vbF3PbP4ffM4PfJ3vbX5/jS5Pfi7vnY5/jB2fbV5vjF2/fR4/jI3vbP4vfL4Pb////p9P/L5f7w+P/l8v/t9v/i8f/3+/9fukv+/v/8/v/6/P8AZsOF71TF4v/B3/7K5P7z+v/P5//1+v/G4//t9f/0+P/h8f7P5v/T6P75/P7w9//0+f/e7//t9v7O5v7+///5/P/v9/7a7f7S6P/P5v7W6v/7/f/R6P/b7P/V6//f7/7e7/7m8//b7P7p8//i8P/9/v7X6//2+//x9//4/P7T6P/T5/7m8/7y+f/7/P9lwE7W6//e7v/W6f5VqVLv9v/0+v97y2ZatUja7P9WvDpTuTf9//9bwT1SrUNYvjrs9f82fcfa6/9Oq0EymCFVuzlOqUB20Fkea79awzceab4ebL9tp9sCZsFawjkebb9LsTLo8/9nul5u2UMAWLcceMlkykJo0ENz1VOE4WM+pCpKpj7e7f57ruIAYsAdbL/s4fceZ76FtOFHrS+Tl9iF8VFrooQ5f8ef/W+HzoJ+4VkvjNats+mUnNWvouSVm9XJuu0edceyr+kAWbeUseeuxOuYx6cAYL+5s+mdmdseitXy5fgZdsgda7/k8f8jjtgAds/HvOyg+3aS2IiX/mShkeMqjdRYisMPgNKVkd5HiMPh7/564VAAZ8VEe410od5WkMtDqS1NmtaV+2VgnoZ/5lNrj7+DpKxneLV3q5SVBKhQAAAAMXRSTlMA+Pj3+Pj4+Pj4+Pf4+Pj3+Pv79/j7+Pj4+/j4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4K0ptgAAAASRJREFUGNNjYMABuIVE2NnZOTg4pDmlJET5IYLshlAQmBTh7cKFJmhlnZ3mK4AqaGVtY1GUKgMTXLx+bntLW/fsnRNqCzUhghyGazfvmNfROcv2pO3EGm2Y4LblG7fPmbnnyLlDu3t1YYIbVqxZt2Xv6WOXDp/ZpQ8TXLV15eoFRw9eOXXh6nEDiCCL4aaly6b0Lbq8//yBfTP0YIJL7CZ3tfYvtLt4YmqdDkSQs6J5UmV5dWPP/LPT6vO1IIIaNsVlOZaWJVVN0xsKMmQhgmJBKVnBZkaZ5nmluekBvBBBHgt3HzcjUw+/+ORQT0c2iCCjk4m/UZx5TEi4l7OxPStEkM/ELME0MTYqOjLM2NWBCSIoLKmmrqyiqqSoIC8nLsiMIyoAlhdiBprNy8QAAAAASUVORK5CYII="}}